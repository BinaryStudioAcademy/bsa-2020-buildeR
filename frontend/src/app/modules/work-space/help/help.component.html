<div class="container-fluid">
  <div class="header-main">
    <h2 class="first-message">How can we help,
      <strong *ngIf="currentUser.firstName.length >= 0; else elseBlock">{{currentUser.firstName}}</strong>
      <ng-template #elseBlock>
        <strong>{{currentUser.username}}</strong>
      </ng-template>
      ?
    </h2>
    <h2 class="second-message">
      Describe your problem and we will help you solve it
    </h2>
  </div>
  <form [formGroup]="helpForm" (ngSubmit)="onSubmit(helpForm.value)">
    <div class="group">
      <div class="field">
        <span>Email</span>
      </div>
      <div class="input-area">
        <input type="email" class="form-control form-control-sm" formControlName="email"
               placeholder="example@mail.com">
        <div *ngIf="helpForm.controls['email'].errors">
          <div class="error" *ngIf="helpForm.controls['email'].errors.required">
            Email is required
          </div>
          <div class="error" *ngIf="helpForm.controls['email'].errors.pattern
            || helpForm.controls['email'].errors.email
            || helpForm.controls['email'].errors.notValid">
            Email must be like 'example12@gmail.com' and can't start or finish <br>with these characters ' - ', ' .
            '<br>
          </div>
        </div>
      </div>
      <div class="field">
        <span>Subject</span>
      </div>
      <div class="input-area">
        <input type="text" class="form-control form-control-sm" formControlName="subject" placeholder="Subject"
        placeholder="Subject">
        <div *ngIf="helpForm.controls['subject'].errors">
          <div class="error" *ngIf="helpForm.controls['subject'].errors.required &&
          helpForm.controls['subject'].touched">
            Subject is required
          </div>
          <div class="error" *ngIf="helpForm.controls['subject'].errors.minlength &&
          helpForm.controls['subject'].touched">
            The min length is 4 characters
          </div>
          <div class="error" *ngIf="helpForm.controls['subject'].errors.maxlength &&
          helpForm.controls['subject'].touched">
            The max length is 200 characters
          </div>
          <div class="error" *ngIf="helpForm.controls['subject'].errors.pattern &&
          helpForm.controls['subject'].touched">
            Subject must have only latin characters
            '<br>
          </div>
        </div>
      </div>
      <div class="field">
        Description
      </div>
      <div class="input-area">
          <textarea type="text" rows="6" class="form-control form-control-sm" formControlName="description"
                    placeholder="Description">
          </textarea>
<!--        <small>Let us know what's happening and how this is effecting you.</small>-->
        <div *ngIf="helpForm.controls['description'].errors">
          <div class="error" *ngIf="helpForm.controls['description'].errors.required &&
          helpForm.controls['description'].touched">
            Description is required
          </div>
          <div class="error" *ngIf="helpForm.controls['description'].errors.minlength &&
          helpForm.controls['description'].touched">
            The min length is 4 characters
          </div>
          <div class="error" *ngIf="helpForm.controls['description'].errors.maxlength &&
          helpForm.controls['description'].touched">
            The max length is 1000 characters
          </div>
          <div class="error" *ngIf="helpForm.controls['description'].errors.pattern &&
          helpForm.controls['description'].touched">
            Description must have only latin characters
            '<br>
          </div>
        </div>
      </div>
      <div class="save-button-container">
        <button type="submit" class="btn btn-primary"
                [disabled]="helpForm.invalid || !helpForm.dirty">Submit</button>
      </div>
      <div class="field">
        <span>You can leave us a review: </span>
      </div>
        <ngb-rating [(rate)]="currentRate" class="rating-container">
          <ng-template let-fill="fill" let-index="index">
            <span class="star" [class.filled]="fill === 100">
              &#9733;
            </span>
          </ng-template>
        </ngb-rating>
      </div>
  </form>
</div>
