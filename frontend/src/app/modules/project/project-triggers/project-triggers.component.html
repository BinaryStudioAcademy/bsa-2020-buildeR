
<div class="trigger-wr">
  <div class="cl">
    <h2 class="title">
      Triggers
    </h2>
    <div class="switch-wr">
      <div class="custom-control custom-switch">
        <input type="checkbox" class="custom-control-input" id="customSwitch1" [(ngModel)]="runOnShedule"
          (change)="onToggle(runOnShedule)">
        <label class="custom-control-label" for="customSwitch1">Run on shedule </label>
      </div>
    </div>
    <div [hidden]='!runOnShedule'>
      <!-- Show Triggers -->
      <ng-container *ngFor="let trigger of triggers">
        <div class="border my-2 p-2">
          <div class="mr-sm-2 branch-wr">
            <span class="mr-2">Branch </span>
            <select class="form-control branch-select" [(ngModel)]="selectedBranch" name="selected" #selected="ngModel">
              <ng-container *ngFor="let branch of branches">
                <option [value]='branch'>{{branch}}</option>
              </ng-container>
            </select>
          </div>
          <app-cron-builder [triggerId]='trigger.id' [cronInput]='trigger.cronExpression'
              (updateEv)='updateTrigger($event)' (deleteEv)='deleteTrigger($event)'>
          </app-cron-builder>
          <span class="mr-sm-2 text">previous fire time: </span>
          <span *ngIf="compareToMinDate(trigger.previousFireTime); else elseNotYet"
            class="mr-sm-2 small-text">{{trigger.previousFireTime | date:"MMM d, y, H:mm"}}</span>
          <ng-template #elseNotYet>
            <span class="mr-sm-2">- still was not -</span>
          </ng-template>
          <div class="d-inline vl mr-sm-2"></div>
          <span class="mr-sm-2 text">next fire time: </span>
          <span class="mr-sm-2 small-text">{{trigger.nextFireTime | date:"MMM d, y, H:mm"}}</span>
        </div>
      </ng-container>
      <!-- end show triggers -->
      <!-- Add new trigger -->
      <div class="trigger-options pb-2">
        <div class="mr-2">
          <h5 class="text-over">Branch </h5>
          <select class="form-control branch-select" [(ngModel)]="selectedBranch" name="selected" #selected="ngModel">
            <ng-container *ngFor="let branch of branches">
              <option [value]='branch'>{{branch}}</option>
            </ng-container>
          </select>
        </div>
        <div class="mr-sm-2">
          <h5 class="text-over">Set up period of builds:</h5>
          <app-cron-builder (cronSetUp)="createTrigger($event)"></app-cron-builder>
        </div>
      </div>

      <!-- end add new trigger -->
    </div>
  </div>
</div>
